extends ../layout

block scripts
	script.
		var polls = !{JSON.stringify(polls)};
	script(src="/javascripts/controllers/pollListCtrl.js")

block content
	div(ng-controller="pollListCtrl")
		h1 Polls

		div.row
			div.col-xs-5
				a.btn.btn-default(href="polls/new") New Poll
			div.col-xs-7
				input.form-control(type="text",ng-model="query",placeholder="Search")

		div.row: div.col-xs-12: hr

		table.table.table-bordered(ng-switch="polls.length")
			tr(ng-switch-when="0"): td No polls in the database. Would you like to #[a(href="polls/new") Create one?]
			tr(ng-switch-default)
				th(width="60%") Name
				th(width="20%") Start
				th(width="20%") End
			tr(ng-switch-default ng-repeat="poll in polls | filter:query")
				td: a(href="/polls/{{poll.id}}") {{poll.name}}
				td {{poll.createdAt}}
				td {{poll.closeTime}}
			//-angular filtering here wouldn't work for a large list.